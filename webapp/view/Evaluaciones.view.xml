<mvc:View
    controllerName="evaluatorweb.controller.Evaluaciones"
    xmlns:html="http://www.w3.org/1999/xhtml"
    xmlns:mvc="sap.ui.core.mvc"
    displayBlock="true"
    xmlns="sap.m"
    xmlns:m="sap.m"
    xmlns:smartFilterBar="sap.ui.comp.smartfilterbar"
    xmlns:smartTable="sap.ui.comp.smarttable"
    xmlns:app="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1"
    xmlns:core="sap.ui.core"
    xmlns:table="sap.ui.table"
>
    <VBox
        id="_IDGenVBox1"
        fitContainer="true"
    >
        <smartFilterBar:SmartFilterBar
            id="smartFilterBar"
            entitySet="Evaluation"
            persistencyKey="SmartFilter_Explored"
            basicSearchFieldName="id"
            enableBasicSearch="true"
        >
            <smartFilterBar:controlConfiguration>
                <smartFilterBar:ControlConfiguration
                    id="_IDGenControlConfiguration1"
                >
                    <smartFilterBar:defaultFilterValues>
                        <smartFilterBar:SelectOption id="_IDGenSelectOption1" />
                    </smartFilterBar:defaultFilterValues>
                </smartFilterBar:ControlConfiguration>
            </smartFilterBar:controlConfiguration>
            <!-- layout data used to make the table growing but the filter bar fixed -->
            <smartFilterBar:layoutData>
                <FlexItemData
                    id="_IDGenFlexItemData1"
                    shrinkFactor="0"
                />
            </smartFilterBar:layoutData>
        </smartFilterBar:SmartFilterBar>
        <smartTable:SmartTable
            id="LineItemsSmartTable"
            entitySet="Evaluation"
            smartFilterId="smartFilterBar"
            tableType="Table"
            enableExport="true"
            beforeExport="onBeforeExport"
            useVariantManagement="true"
            useTablePersonalisation="true"
            header="Evaluaciones"
            showRowCount="true"
            enableAutoBinding="true"
            class="sapUiResponsiveContentPadding myTableClass"
            enableAutoColumnWidth="true"
            editTogglable="false"
            app:useSmartToggle="true"
            showFullScreenButton="true"
            editToggled=".onToggle"
            initialise=".onSmartTableInitialised"
        >
            <smartTable:customToolbar>
                <OverflowToolbar id="_IDGenOverflowToolbar1">
                    <ToolbarSpacer id="_IDGenToolbarSpacer2" />
                    <Button
                        id="_IDGenButton2"
                        press="onOpenCreateDialog"
                        icon="sap-icon://add"
                        tooltip="Añadir"
                    />
                    <Button
                        id="_IDGenButton5"
                        press="onEditarEvaluacion"
                        icon="sap-icon://edit"
                        tooltip="Editar"
                    />
                    <Button
                        id="_IDGenButton3"
                        press="onEliminarEvaluacion"
                        icon="sap-icon://delete"
                        tooltip="Eliminar"
                    />
                </OverflowToolbar>
            </smartTable:customToolbar>
            <smartTable:layoutData>
                <FlexItemData
                    id="_IDGenFlexItemData2"
                    growFactor="1"
                    baseSize="0%"
                />
            </smartTable:layoutData>

            <table:Table
                id="_IDGenTable1"
                selectionMode="MultiToggle"
                ariaLabelledBy="title"
            >
                <table:columns>
                    <table:Column
                        id="_IDGenColumn1"
                        width="11rem"
                    >
                        <table:customData>
                            <core:CustomData
                                key="p13nData"
                                value='\{"columnKey": "weight", "leadingProperty": "weight", "columnIndex": 99}'
                            />
                        </table:customData>
                        <m:Label
                            id="_IDGenLabel1"
                            text="Peso"
                        />
                        <table:template>
                            <m:Text
                                id="_IDGenText1"
                                text="{path: 'weight', formatter: '.formatter.weightInPercentage'}"
                            />
                        </table:template>
                    </table:Column>
                </table:columns>
            </table:Table>
        </smartTable:SmartTable>
    </VBox>

    <Dialog
        id="crearEvaluacionDialog"
        title="Crear una nueva evaluación"
        contentWidth="500px"
        afterClose=".onCrearEvaluacionDialogClose"
        class="myDialog"
    >
        <content>
            <Panel id="_IDGenPanel1">
                <Label
                    class="LabelWithInput"
                    id="Labelid"
                    text="ID"
                />
                <Input
                    id="inputId"
                    value="{id}"
                />

                <Label
                    class="LabelWithInput"
                    id="labelNombre"
                    text="Nombre"
                />
                <Input
                    id="inputName"
                    value="{name}"
                />

                <Label
                    class="LabelWithInput"
                    id="labelDescription"
                    text="Descripción"
                />
                <Input
                    id="inputDescription"
                    value="{description}"
                />
                <Label
                    class="LabelWithInput"
                    id="labelDepartment"
                    text="Peso"
                />
                <Input
                    id="inputWeight"
                    value="{weight}"
                    placeholder="%"
                />
            </Panel>
            <Panel id="_IDGenPanel2">
                <content>
                    <HBox id="_IDGenHBox1">
                        <items>
                            <Button
                                id="buttonCrear"
                                text="Crear"
                                press=".onSubmit"
                                class="dialogButton"
                            />
                            <Button
                                id="buttonCancel"
                                text="Cancelar"
                                press=".onCrearEvaluacionDialogClose"
                                class="dialogButton"
                            />
                        </items>
                    </HBox>
                </content>
            </Panel>
        </content>
    </Dialog>
    <Dialog
        id="editarEvaluacionDialog"
        title="Editar Evaluación"
    >
        <content>
            <Panel id="_IDGenPanel3">
                <VBox id="_IDGenVBox2">
                    <ComboBox
                        id="idComboBox"
                        placeholder="Selecciona un ID"
                        change="onIdChange"
                        selectedKey="selectedItem"
                    />
                    <Label
                        class="LabelWithInput"
                        id="labelNombre2"
                        text="Nombre"
                    />
                    <Input
                        id="inputNameEdit"
                        type="Text"
                    />
                    <Label
                        class="LabelWithInput"
                        id="labelDescription2"
                        text="Descripción"
                    />
                    <Input
                        id="inputDescriptionEdit"
                        type="Text"
                    />
                    <Label
                        class="LabelWithInput"
                        id="labelWeight"
                        text="Peso"
                    />
                    <Input
                        id="inputWeightEdit"
                        type="Text"
                        placeholder="%"
                    />
                </VBox>
            </Panel>
        </content>

        <beginButton>
            <Button
                id="_IDGenButton6"
                text="Guardar"
                press="onSubmitEdit"
            />
        </beginButton>
        <endButton>
            <Button
                id="_IDGenButton7"
                text="Cancelar"
                press="onCrearEvaluacionDialogClose2"
            />
        </endButton>
    </Dialog>
</mvc:View>
